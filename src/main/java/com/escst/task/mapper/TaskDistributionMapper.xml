<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.escst.task.mapper.TaskDistributionMapper">

    <select id="queryScheduledPlanList" parameterType="map" resultType="com.escst.task.entity.ScheduledPlanEntity">
        SELECT id,construction_id constructionId,name,parent_id parentId,DATE_FORMAT(start_date,'%Y-%m-%d') startDate,DATE_FORMAT(end_date,'%Y-%m-%d') endDate
        FROM T_BASIC_PROJECT_STRUCTURE
        <where>
            <if test="constructionId != null and constructionId != ''">
                and construction_id = #{constructionId}
            </if>
        </where>
        ORDER BY sort_num
    </select>

</mapper>